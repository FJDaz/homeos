{
  "task_id": "studio-genome-frontend-001",
  "description": "Studio genome frontend: GET /studio/genome, studio.html + studio-genome.js, rendu organes et appels API, lien chatbox→Studio",
  "steps": [
    {
      "id": "step_1",
      "description": "Implement GET /studio/genome in Backend/Prod/api.py. Route: GET /studio/genome. Query param path (optional): path to genome JSON; default: settings.output_dir / 'studio' / 'homeos_genome.json'. If file missing: return 404 or optionally call generate_genome() from core.genome_generator then serve. Return JSON with Content-Type application/json. Handle 500 on read error.",
      "type": "code_generation",
      "complexity": 0.4,
      "estimated_tokens": 500,
      "dependencies": [],
      "validation_criteria": [
        "GET /studio/genome returns 200 with genome JSON when file exists",
        "404 when file absent (or optional: generate then 200)",
        "Query param path overrides default path when provided"
      ],
      "context": {
        "language": "python",
        "framework": "fastapi",
        "files": ["Backend/Prod/api.py"]
      }
    },
    {
      "id": "step_2",
      "description": "Create Frontend/studio.html: minimal page with container for organes, optional sidebar for topology, title from metadata. Include css/styles.css and js/studio-genome.js. Create Frontend/js/studio-genome.js: config (genomeUrl default /studio/genome, baseUrl from window.location.origin), fetch(genomeUrl) to load genome, handle network/404/parse errors, display metadata.intent as page title, optionally display topology as nav.",
      "type": "code_generation",
      "complexity": 0.5,
      "estimated_tokens": 800,
      "dependencies": ["step_1"],
      "validation_criteria": [
        "studio.html loads and includes studio-genome.js",
        "studio-genome.js fetches /studio/genome and parses JSON",
        "Page title shows metadata.intent; topology shown if present"
      ],
      "context": {
        "language": "html",
        "framework": "",
        "files": ["Frontend/studio.html", "Frontend/js/studio-genome.js"]
      }
    },
    {
      "id": "step_3",
      "description": "In studio-genome.js implement organ rendering: for each endpoints[] create one organ block from x_ui_hint (terminal, gauge, status, form, dashboard, detail, list, generic). Map: terminal→title+pre+Refresh; gauge→title+div+Refresh; status→title+div+Check; form→title+form+submit+output; dashboard/list/detail→title+div+Load/View; generic→title+div+Fetch. Each organ has data-path, data-method. On button/submit: fetch(baseUrl+path, { method }) and display response (JSON.stringify or text) in organ output zone. Reuse brutalist styles (inline or from builder) for .organe, .out, buttons.",
      "type": "code_generation",
      "complexity": 0.6,
      "estimated_tokens": 1200,
      "dependencies": ["step_2"],
      "validation_criteria": [
        "Each endpoint renders as one organ with correct x_ui_hint UI",
        "Button/Submit triggers fetch to endpoint path with correct method",
        "Response displayed in organ output (JSON or text)"
      ],
      "context": {
        "language": "javascript",
        "framework": "",
        "files": ["Frontend/js/studio-genome.js"]
      }
    },
    {
      "id": "step_4",
      "description": "Add link from chatbox (Frontend/index.html) to Studio: add a visible link to studio.html (e.g. 'Studio' in header or in welcome message). Ensure link works when frontend is served from API (path /studio.html or as route). If API serves static frontend at /, add route or static file so /studio.html serves Frontend/studio.html.",
      "type": "code_generation",
      "complexity": 0.3,
      "estimated_tokens": 400,
      "dependencies": ["step_2"],
      "validation_criteria": [
        "User can open Studio from index.html (chatbox) via link",
        "studio.html is reachable (API serves it or static mount)"
      ],
      "context": {
        "language": "html",
        "framework": "",
        "files": ["Frontend/index.html", "Backend/Prod/api.py"]
      }
    },
    {
      "id": "step_5",
      "description": "Optional: Expose genome as static file (e.g. GET /studio/files/homeos_genome.json) and/or ensure schema_definitions in genome are available for future form generation. Document in code or README. Low priority: only if time permits.",
      "type": "code_generation",
      "complexity": 0.3,
      "estimated_tokens": 300,
      "dependencies": ["step_1"],
      "validation_criteria": [
        "Optional static route for genome file or schema_definitions documented"
      ],
      "context": {
        "language": "python",
        "framework": "fastapi",
        "files": ["Backend/Prod/api.py"]
      }
    }
  ],
  "metadata": {
    "created_at": "2025-01-29T12:00:00Z",
    "claude_version": "claude-code",
    "project_context": "Studio genome frontend self-construction per docs/plans/plan_genome_frontend_self_construction.md"
  }
}
