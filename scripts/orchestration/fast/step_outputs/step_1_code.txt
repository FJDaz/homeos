{
  "operations": [
    {
      "type": "add_function",
      "code": "estimate_tokens() {\n  local word_count\n  word_count=$(extract_kimi_report | wc -w)\n  TOKENS_CR=$((word_count * 13 / 10))\n  ICC_PERCENT=$(bc -l <<< \"scale=2; $TOKENS_CR / 128000 * 100\")\n}"
    },
    {
      "type": "modify_method",
      "target": "display_report",
      "position": "after",
      "code": "echo\"\n\"\necho -e \"${YELLOW}ðŸ“Š Rapport technique :${NC}\"\necho \"  Tokens estimÃ©s : $TOKENS_CR\"\necho \"  ICC approximatif : $ICC_PERCENT%\"\n"
    }
  ]
}